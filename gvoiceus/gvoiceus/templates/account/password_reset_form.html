<!-- templates/account/password_reset_form.html -->
{% extends "base.html" %}
{% load static %}
{% block title %}Reset password{% endblock %}

{% block content %}
<div class="max-w-md mx-auto bg-white p-6 rounded-lg border">
  <h1 class="text-xl font-semibold mb-3">Forgot your password?</h1>
  <p class="text-sm text-slate-600 mb-4">
    Enter your account email and weâ€™ll send a reset link.
  </p>

  <form method="post" novalidate>
    {% csrf_token %}

    {# Top-level (non-field) errors, if any #}
    {% if form.non_field_errors %}
      <div class="mb-3 text-sm text-rose-600">
        {{ form.non_field_errors }}
      </div>
    {% endif %}

    {# Email field #}
    {% if form.email.errors %}
      <div class="mb-1 text-sm text-rose-600">{{ form.email.errors }}</div>
    {% endif %}
    <input
      type="email"
      name="email"
      autocomplete="email"
      required
      placeholder="you@example.com"
      class="w-full border rounded px-3 py-2 mb-4"
      value="{{ form.email.value|default:'' }}"
    />

    {# --- hCaptcha field --- #}
    {% if form.hcaptcha.errors %}
      <div class="mb-1 text-sm text-rose-600">{{ form.hcaptcha.errors }}</div>
    {% endif %}

    <div class="mb-4">
      {{ form.hcaptcha }}
      <noscript>
        <p class="mt-2 text-xs text-slate-600">
          JavaScript is required to load hCaptcha. Please enable JavaScript and reload this page.
        </p>
      </noscript>
    </div>

    <button class="w-full bg-blue-600 text-white rounded px-4 py-2">
      Send reset link
    </button>

    <p class="mt-3 text-xs text-slate-500">
      This site is protected by hCaptcha and its
      <a class="underline hover:no-underline" href="https://hcaptcha.com/privacy" target="_blank" rel="noopener">Privacy Policy</a>
      and
      <a class="underline hover:no-underline" href="https://hcaptcha.com/terms" target="_blank" rel="noopener">Terms of Service</a>
      apply.
    </p>
  </form>
</div>

{# hCaptcha client script (required) #}
<script src="https://js.hcaptcha.com/1/api.js" async defer></script>
{% endblock %}
