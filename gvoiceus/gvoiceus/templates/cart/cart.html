{% extends "base.html" %}
{% block title %}{{ seo.title }} - Gvoiceus{% endblock %}
{% block content %}
  <h1 class="text-2xl font-semibold mb-4 text-center">Your Cart</h1>
  {% if items %}
    <div class="space-y-3">
      {% for it in items %}
        <div class="flex items-center justify-between gap-4 border rounded p-3">
          <div class="flex items-center gap-3">
            {% if it.product.image %}<img src="{{ it.product.image.url }}" class="w-16 h-16 rounded object-cover">{% endif %}
            <div>
              <div class="font-medium">{{ it.product.name }}</div>
              <div class="text-sm text-gray-500">Unit: ${{ it.unit_price }}</div>
            </div>
          </div>

          <form method="post" action="{% url 'cart_update' it.product.id %}" class="flex items-center gap-2">
            {% csrf_token %}
            <input type="hidden" name="action" value="set">
            <input type="number" name="qty" min="0" value="{{ it.qty }}" class="w-20 px-3 py-2 border rounded">
            <button class="px-3 py-2 border rounded">Update</button>
          </form>

          <div class="font-semibold">${{ it.line_total }}</div>

          <form method="post" action="{% url 'cart_update' it.product.id %}">
            {% csrf_token %}
            <input type="hidden" name="action" value="remove">
            <button class="px-3 py-2 text-rose-600 border border-rose-600 rounded">Remove</button>
          </form>
        </div>
      {% endfor %}
    </div>

    <div class="mt-6 flex items-center justify-center gap-4">
  <div class="text-lg">
    Subtotal: <span class="font-bold">${{ subtotal }}</span>
  </div>
  <a href="/checkout" class="px-4 py-2 rounded bg-blue-600 text-white">
    Checkout
  </a>
</div>

  {% else %}
    <div class="flex items-center justify-center h-64">
    <p class="text-gray-500 text-lg">Your cart is empty.</p>
  </div>
  {% endif %}
{% endblock %}
